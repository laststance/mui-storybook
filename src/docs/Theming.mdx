import { Meta, Source } from '@storybook/addon-docs/blocks'
import { En, Ja } from '../../.storybook/components/LocalizedDoc'

<Meta title="Design System/Theming" />

<En>
# Theming

MUI's theming system allows you to customize all design aspects of your application consistently.

---

## Theme Structure

```tsx
const theme = createTheme({
  palette: { ... },      // Colors
  typography: { ... },   // Fonts and text styles
  spacing: (factor) => ..., // Spacing multiplier
  breakpoints: { ... },  // Responsive breakpoints
  shape: { ... },        // Border radius
  shadows: [ ... ],      // Elevation shadows
  transitions: { ... },  // Animation timing
  zIndex: { ... },       // Layer ordering
  components: { ... },   // Component overrides
})
```

---

## createTheme API

### Basic Usage

```tsx
import { createTheme, ThemeProvider } from '@mui/material/styles'

const theme = createTheme({
  palette: {
    primary: {
      main: '#1976d2',
      light: '#42a5f5',
      dark: '#1565c0',
      contrastText: '#fff',
    },
  },
})

function App() {
  return (
    <ThemeProvider theme={theme}>
      {/* components */}
    </ThemeProvider>
  )
}
```

### Extending Default Theme

```tsx
import { createTheme } from '@mui/material/styles'

// Get default theme values
const defaultTheme = createTheme()

// Extend with custom values
const theme = createTheme({
  palette: {
    primary: {
      main: '#1976d2',
    },
  },
  components: {
    MuiButton: {
      styleOverrides: {
        root: {
          borderRadius: defaultTheme.spacing(1),
        },
      },
    },
  },
})
```

---

## Light and Dark Modes

### Mode-Based Palette

```tsx
const theme = createTheme({
  palette: {
    mode: 'dark', // or 'light'
  },
})
```

### Color Scheme Support (CSS Variables)

```tsx
const theme = createTheme({
  cssVariables: {
    colorSchemeSelector: 'data-mui-color-scheme',
  },
  colorSchemes: {
    light: {
      palette: {
        primary: { main: '#1976d2' },
        background: { default: '#ffffff', paper: '#f5f5f5' },
      },
    },
    dark: {
      palette: {
        primary: { main: '#90caf9' },
        background: { default: '#0a1929', paper: '#001e3c' },
      },
    },
  },
})
```

### Runtime Mode Toggle

```tsx
import { useState, useMemo } from 'react'
import { ThemeProvider, createTheme } from '@mui/material/styles'
import { IconButton } from '@mui/material'
import { Brightness4, Brightness7 } from '@mui/icons-material'

function App() {
  const [mode, setMode] = useState<'light' | 'dark'>('light')

  const theme = useMemo(
    () => createTheme({ palette: { mode } }),
    [mode]
  )

  const toggleMode = () => {
    setMode((prev) => (prev === 'light' ? 'dark' : 'light'))
  }

  return (
    <ThemeProvider theme={theme}>
      <IconButton onClick={toggleMode}>
        {mode === 'dark' ? <Brightness7 /> : <Brightness4 />}
      </IconButton>
    </ThemeProvider>
  )
}
```

---

## Component Customization

### Global Style Overrides

```tsx
const theme = createTheme({
  components: {
    MuiButton: {
      // Default props
      defaultProps: {
        disableElevation: true,
        variant: 'contained',
      },
      // Style overrides
      styleOverrides: {
        root: {
          textTransform: 'none',
          borderRadius: 8,
        },
        containedPrimary: {
          '&:hover': {
            backgroundColor: '#1565c0',
          },
        },
      },
      // Variants
      variants: [
        {
          props: { variant: 'dashed' },
          style: {
            border: '2px dashed currentColor',
          },
        },
      ],
    },
  },
})
```

### Component-Level Theming

```tsx
// Access theme in sx prop
<Box
  sx={{
    bgcolor: 'background.paper',
    color: 'text.primary',
    p: 2,
    borderRadius: 1,
  }}
/>

// Access theme with callback
<Box
  sx={(theme) => ({
    bgcolor: theme.palette.mode === 'dark'
      ? 'grey.900'
      : 'grey.100',
  })}
/>
```

---

## useTheme Hook

```tsx
import { useTheme } from '@mui/material/styles'

function Component() {
  const theme = useTheme()

  return (
    <div style={{
      backgroundColor: theme.palette.background.default,
      color: theme.palette.text.primary,
      padding: theme.spacing(2),
    }}>
      Current mode: {theme.palette.mode}
    </div>
  )
}
```

---

## Nested Themes

```tsx
import { ThemeProvider, createTheme } from '@mui/material/styles'

const outerTheme = createTheme({
  palette: { primary: { main: '#1976d2' } },
})

const innerTheme = createTheme({
  palette: { primary: { main: '#e91e63' } },
})

function App() {
  return (
    <ThemeProvider theme={outerTheme}>
      <Button>Blue Button</Button>
      <ThemeProvider theme={innerTheme}>
        <Button>Pink Button</Button>
      </ThemeProvider>
    </ThemeProvider>
  )
}
```

---

## CSS Variables Mode

Enable CSS variables for dynamic theming:

```tsx
const theme = createTheme({
  cssVariables: true,
})

// Generated CSS variables:
// --mui-palette-primary-main: #1976d2;
// --mui-palette-background-default: #fff;
// etc.
```

Usage in CSS:

```css
.custom-element {
  background-color: var(--mui-palette-background-paper);
  color: var(--mui-palette-text-primary);
}
```

---

## Best Practices

<table>
  <thead>
    <tr>
      <th>Practice</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr><td><strong>Single Theme</strong></td><td>Create one theme and extend as needed</td></tr>
    <tr><td><strong>Use Tokens</strong></td><td>Reference theme values instead of hardcoding</td></tr>
    <tr><td><strong>Type Safety</strong></td><td>Extend theme types for custom properties</td></tr>
    <tr><td><strong>Performance</strong></td><td>Memoize theme creation with <code>useMemo</code></td></tr>
    <tr><td><strong>Consistency</strong></td><td>Use <code>sx</code> prop for one-off styles</td></tr>
  </tbody>
</table>

---

## Next Steps

- **[Design Tokens](/docs/design-system-design-tokens--docs)** - Explore all available tokens
- **[Colors](/docs/design-system-colors--docs)** - Color palette customization
- **[Typography](/docs/design-system-typography--docs)** - Font customization
</En>

<Ja>
# テーマ

MUIのテーマシステムを使用すると、アプリケーションのすべてのデザイン要素を一貫してカスタマイズできます。

---

## テーマ構造

```tsx
const theme = createTheme({
  palette: { ... },      // Colors
  typography: { ... },   // Fonts and text styles
  spacing: (factor) => ..., // Spacing multiplier
  breakpoints: { ... },  // Responsive breakpoints
  shape: { ... },        // Border radius
  shadows: [ ... ],      // Elevation shadows
  transitions: { ... },  // Animation timing
  zIndex: { ... },       // Layer ordering
  components: { ... },   // Component overrides
})
```

---

## createTheme API

### 基本的な使い方

```tsx
import { createTheme, ThemeProvider } from '@mui/material/styles'

const theme = createTheme({
  palette: {
    primary: {
      main: '#1976d2',
      light: '#42a5f5',
      dark: '#1565c0',
      contrastText: '#fff',
    },
  },
})

function App() {
  return (
    <ThemeProvider theme={theme}>
      {/* components */}
    </ThemeProvider>
  )
}
```

### デフォルトテーマの拡張

```tsx
import { createTheme } from '@mui/material/styles'

// Get default theme values
const defaultTheme = createTheme()

// Extend with custom values
const theme = createTheme({
  palette: {
    primary: {
      main: '#1976d2',
    },
  },
  components: {
    MuiButton: {
      styleOverrides: {
        root: {
          borderRadius: defaultTheme.spacing(1),
        },
      },
    },
  },
})
```

---

## ライトモードとダークモード

### モードベースのパレット

```tsx
const theme = createTheme({
  palette: {
    mode: 'dark', // or 'light'
  },
})
```

### カラースキームサポート（CSS変数）

```tsx
const theme = createTheme({
  cssVariables: {
    colorSchemeSelector: 'data-mui-color-scheme',
  },
  colorSchemes: {
    light: {
      palette: {
        primary: { main: '#1976d2' },
        background: { default: '#ffffff', paper: '#f5f5f5' },
      },
    },
    dark: {
      palette: {
        primary: { main: '#90caf9' },
        background: { default: '#0a1929', paper: '#001e3c' },
      },
    },
  },
})
```

### ランタイムでのモード切り替え

```tsx
import { useState, useMemo } from 'react'
import { ThemeProvider, createTheme } from '@mui/material/styles'
import { IconButton } from '@mui/material'
import { Brightness4, Brightness7 } from '@mui/icons-material'

function App() {
  const [mode, setMode] = useState<'light' | 'dark'>('light')

  const theme = useMemo(
    () => createTheme({ palette: { mode } }),
    [mode]
  )

  const toggleMode = () => {
    setMode((prev) => (prev === 'light' ? 'dark' : 'light'))
  }

  return (
    <ThemeProvider theme={theme}>
      <IconButton onClick={toggleMode}>
        {mode === 'dark' ? <Brightness7 /> : <Brightness4 />}
      </IconButton>
    </ThemeProvider>
  )
}
```

---

## コンポーネントのカスタマイズ

### グローバルスタイルのオーバーライド

```tsx
const theme = createTheme({
  components: {
    MuiButton: {
      // Default props
      defaultProps: {
        disableElevation: true,
        variant: 'contained',
      },
      // Style overrides
      styleOverrides: {
        root: {
          textTransform: 'none',
          borderRadius: 8,
        },
        containedPrimary: {
          '&:hover': {
            backgroundColor: '#1565c0',
          },
        },
      },
      // Variants
      variants: [
        {
          props: { variant: 'dashed' },
          style: {
            border: '2px dashed currentColor',
          },
        },
      ],
    },
  },
})
```

### コンポーネントレベルのテーマ適用

```tsx
// Access theme in sx prop
<Box
  sx={{
    bgcolor: 'background.paper',
    color: 'text.primary',
    p: 2,
    borderRadius: 1,
  }}
/>

// Access theme with callback
<Box
  sx={(theme) => ({
    bgcolor: theme.palette.mode === 'dark'
      ? 'grey.900'
      : 'grey.100',
  })}
/>
```

---

## useTheme フック

```tsx
import { useTheme } from '@mui/material/styles'

function Component() {
  const theme = useTheme()

  return (
    <div style={{
      backgroundColor: theme.palette.background.default,
      color: theme.palette.text.primary,
      padding: theme.spacing(2),
    }}>
      Current mode: {theme.palette.mode}
    </div>
  )
}
```

---

## ネストされたテーマ

```tsx
import { ThemeProvider, createTheme } from '@mui/material/styles'

const outerTheme = createTheme({
  palette: { primary: { main: '#1976d2' } },
})

const innerTheme = createTheme({
  palette: { primary: { main: '#e91e63' } },
})

function App() {
  return (
    <ThemeProvider theme={outerTheme}>
      <Button>Blue Button</Button>
      <ThemeProvider theme={innerTheme}>
        <Button>Pink Button</Button>
      </ThemeProvider>
    </ThemeProvider>
  )
}
```

---

## CSS変数モード

動的なテーマ設定のためにCSS変数を有効にします：

```tsx
const theme = createTheme({
  cssVariables: true,
})

// Generated CSS variables:
// --mui-palette-primary-main: #1976d2;
// --mui-palette-background-default: #fff;
// etc.
```

CSSでの使用方法：

```css
.custom-element {
  background-color: var(--mui-palette-background-paper);
  color: var(--mui-palette-text-primary);
}
```

---

## ベストプラクティス

<table>
  <thead>
    <tr>
      <th>プラクティス</th>
      <th>説明</th>
    </tr>
  </thead>
  <tbody>
    <tr><td><strong>単一のテーマ</strong></td><td>1つのテーマを作成し、必要に応じて拡張する</td></tr>
    <tr><td><strong>トークンの使用</strong></td><td>ハードコーディングではなくテーマの値を参照する</td></tr>
    <tr><td><strong>型安全性</strong></td><td>カスタムプロパティのためにテーマ型を拡張する</td></tr>
    <tr><td><strong>パフォーマンス</strong></td><td><code>useMemo</code>でテーマ作成をメモ化する</td></tr>
    <tr><td><strong>一貫性</strong></td><td>一度限りのスタイルには<code>sx</code>プロップを使用する</td></tr>
  </tbody>
</table>

---

## 次のステップ

- **[Design Tokens](/docs/design-system-design-tokens--docs)** - 利用可能なすべてのトークンを探索する
- **[Colors](/docs/design-system-colors--docs)** - カラーパレットのカスタマイズ
- **[Typography](/docs/design-system-typography--docs)** - フォントのカスタマイズ
</Ja>
