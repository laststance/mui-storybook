import { Meta } from '@storybook/addon-docs/blocks'

<Meta title="デザインシステム/スペーシング" />

# スペーシングシステム

MUIは、一貫した視覚的リズムを実現するために8pxを基準単位とするスペーシングシステムを使用しています。

---

## 基準単位

デフォルトのスペーシング単位は **8px** です。すべてのスペーシング値は、この基準の倍数になります。

```tsx
theme.spacing(1) // 8px
theme.spacing(2) // 16px
theme.spacing(3) // 24px
theme.spacing(4) // 32px
```

---

## スペーシングスケール

<table>
  <thead>
    <tr>
      <th>係数</th>
      <th>値</th>
      <th>CSS変数</th>
      <th>一般的な用途</th>
    </tr>
  </thead>
  <tbody>
    <tr><td>0</td><td>0px</td><td><code>--spacing-0</code></td><td>スペースなし</td></tr>
    <tr><td>0.5</td><td>4px</td><td><code>--spacing-0-5</code></td><td>狭い間隔</td></tr>
    <tr><td>1</td><td>8px</td><td><code>--spacing-1</code></td><td>アイコン間隔</td></tr>
    <tr><td>1.5</td><td>12px</td><td><code>--spacing-1-5</code></td><td>コンパクトなパディング</td></tr>
    <tr><td>2</td><td>16px</td><td><code>--spacing-2</code></td><td>デフォルトパディング</td></tr>
    <tr><td>2.5</td><td>20px</td><td><code>--spacing-2-5</code></td><td>中程度の間隔</td></tr>
    <tr><td>3</td><td>24px</td><td><code>--spacing-3</code></td><td>カードパディング</td></tr>
    <tr><td>4</td><td>32px</td><td><code>--spacing-4</code></td><td>セクション間隔</td></tr>
    <tr><td>5</td><td>40px</td><td><code>--spacing-5</code></td><td>大きな間隔</td></tr>
    <tr><td>6</td><td>48px</td><td><code>--spacing-6</code></td><td>セクションスペース</td></tr>
    <tr><td>8</td><td>64px</td><td><code>--spacing-8</code></td><td>大きな区切り</td></tr>
  </tbody>
</table>

---

## スペーシングの使用

### sx Prop（省略記法）

```tsx
// マージンとパディングの省略記法
<Box sx={{ m: 2 }} />  // margin: 16px (全方向)
<Box sx={{ p: 3 }} />  // padding: 24px (全方向)

// 方向指定
<Box sx={{ mt: 1 }} /> // margin-top: 8px
<Box sx={{ mb: 2 }} /> // margin-bottom: 16px
<Box sx={{ ml: 3 }} /> // margin-left: 24px
<Box sx={{ mr: 4 }} /> // margin-right: 32px
<Box sx={{ pt: 2 }} /> // padding-top: 16px
<Box sx={{ pb: 2 }} /> // padding-bottom: 16px
<Box sx={{ pl: 2 }} /> // padding-left: 16px
<Box sx={{ pr: 2 }} /> // padding-right: 16px

// 軸指定
<Box sx={{ mx: 2 }} /> // margin-left & right: 16px
<Box sx={{ my: 3 }} /> // margin-top & bottom: 24px
<Box sx={{ px: 2 }} /> // padding-left & right: 16px
<Box sx={{ py: 3 }} /> // padding-top & bottom: 24px
```

### スペーシングPropリファレンス

<table>
  <thead>
    <tr>
      <th>Prop</th>
      <th>CSSプロパティ</th>
    </tr>
  </thead>
  <tbody>
    <tr><td><code>m</code></td><td>margin</td></tr>
    <tr><td><code>mt</code></td><td>margin-top</td></tr>
    <tr><td><code>mb</code></td><td>margin-bottom</td></tr>
    <tr><td><code>ml</code></td><td>margin-left</td></tr>
    <tr><td><code>mr</code></td><td>margin-right</td></tr>
    <tr><td><code>mx</code></td><td>margin-left, margin-right</td></tr>
    <tr><td><code>my</code></td><td>margin-top, margin-bottom</td></tr>
    <tr><td><code>p</code></td><td>padding</td></tr>
    <tr><td><code>pt</code></td><td>padding-top</td></tr>
    <tr><td><code>pb</code></td><td>padding-bottom</td></tr>
    <tr><td><code>pl</code></td><td>padding-left</td></tr>
    <tr><td><code>pr</code></td><td>padding-right</td></tr>
    <tr><td><code>px</code></td><td>padding-left, padding-right</td></tr>
    <tr><td><code>py</code></td><td>padding-top, padding-bottom</td></tr>
  </tbody>
</table>

### Gapプロパティ

```tsx
// Flexboxとグリッドレイアウトの場合
<Stack sx={{ gap: 2 }}>     // gap: 16px
<Grid container spacing={3}> // gap: 24px
```

---

## テーマスペーシング関数

### 基本的な使用方法

```tsx
import { useTheme } from '@mui/material/styles'

function Component() {
  const theme = useTheme()

  return (
    <div style={{ padding: theme.spacing(2) }}>
      {/* padding: 16px */}
    </div>
  )
}
```

### 複数の引数

```tsx
theme.spacing(2)       // '16px'
theme.spacing(1, 2)    // '8px 16px' (上下、左右)
theme.spacing(1, 2, 3) // '8px 16px 24px' (上、左右、下)
theme.spacing(1, 2, 3, 4) // '8px 16px 24px 32px' (上、右、下、左)
```

### 計算

```tsx
// スペーシングでの算術演算
<Box sx={{ mt: theme.spacing(2) + 'px' }} />

// sx内でのcalc
<Box sx={{ width: `calc(100% - ${theme.spacing(4)})` }} />
```

---

## カスタムスペーシング

### 基準単位の変更

```tsx
const theme = createTheme({
  spacing: 4, // 1単位 = 4px に変更
})

theme.spacing(2) // 8px (4 * 2)
theme.spacing(4) // 16px (4 * 4)
```

### カスタムスペーシング関数

```tsx
const theme = createTheme({
  spacing: (factor) => `${0.25 * factor}rem`,
})

theme.spacing(4) // '1rem'
theme.spacing(8) // '2rem'
```

### 配列ベースのスペーシング

```tsx
const theme = createTheme({
  spacing: [0, 4, 8, 16, 32, 64],
})

theme.spacing(2) // '8px' (インデックス2)
theme.spacing(4) // '32px' (インデックス4)
```

---

## Stackコンポーネント

子要素間の自動スペーシング:

```tsx
import { Stack } from '@mui/material'

<Stack spacing={2}>
  <Item>Item 1</Item>
  <Item>Item 2</Item>
  <Item>Item 3</Item>
</Stack>

// 方向指定
<Stack direction="row" spacing={3}>
  <Item>Left</Item>
  <Item>Right</Item>
</Stack>

// レスポンシブスペーシング
<Stack
  spacing={{ xs: 1, sm: 2, md: 3 }}
  direction={{ xs: 'column', sm: 'row' }}
>
  <Item>A</Item>
  <Item>B</Item>
</Stack>
```

---

## グリッドスペーシング

```tsx
import { Grid } from '@mui/material'

<Grid container spacing={2}>
  <Grid item xs={6}>
    <Item>Item 1</Item>
  </Grid>
  <Grid item xs={6}>
    <Item>Item 2</Item>
  </Grid>
</Grid>

// 行と列で異なるスペーシング
<Grid container rowSpacing={2} columnSpacing={3}>
  ...
</Grid>
```

---

## ネガティブマージン

```tsx
// 要素の重なりに使用
<Box sx={{ mt: -2 }} /> // margin-top: -16px

// 一般的なパターン: パディング付きコンテナ内での全幅要素
<Box sx={{ px: 3 }}>
  <Box sx={{ mx: -3 }}>
    {/* 全幅要素 */}
  </Box>
</Box>
```

---

## 自動マージン

```tsx
// 水平方向の中央揃え
<Box sx={{ mx: 'auto', width: 200 }} />

// 右に配置（Flexコンテナ内）
<Box sx={{ ml: 'auto' }} />

// 下に配置（Flex縦方向コンテナ内）
<Box sx={{ mt: 'auto' }} />
```

---

## ベストプラクティス

<table>
  <thead>
    <tr>
      <th>実践方法</th>
      <th>例</th>
    </tr>
  </thead>
  <tbody>
    <tr><td><strong>係数を使用</strong></td><td><code>spacing=&#123;2&#125;</code>、<code>spacing="16px"</code>ではない</td></tr>
    <tr><td><strong>一貫したスケール</strong></td><td>1、2、3、4、6、8に統一</td></tr>
    <tr><td><strong>リストにはStack</strong></td><td><code>Stack</code>を<code>spacing</code>と共に使用</td></tr>
    <tr><td><strong>レイアウトにはGrid</strong></td><td><code>Grid</code>を<code>spacing</code>と共に使用</td></tr>
    <tr><td><strong>レスポンシブ</strong></td><td>ブレイクポイントに応じてスペーシングを調整</td></tr>
  </tbody>
</table>

---

## 一般的なパターン

```tsx
// カードパディング
<Card sx={{ p: 3 }} />

// リストアイテムのパディング
<ListItem sx={{ py: 1, px: 2 }} />

// ボタングループの間隔
<Stack direction="row" spacing={1} />

// セクションマージン
<Box component="section" sx={{ my: 6 }} />

// フォームフィールドのスペーシング
<Stack spacing={3}>
  <TextField />
  <TextField />
  <Button />
</Stack>
```
