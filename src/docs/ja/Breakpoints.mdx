import { Meta } from '@storybook/addon-docs/blocks'

<Meta title="デザインシステム/ブレークポイント" />

# ブレークポイント

MUIのブレークポイントシステムは、すべての画面サイズでレスポンシブデザインを可能にします。

---

## デフォルトブレークポイント

<table>
  <thead>
    <tr>
      <th>キー</th>
      <th>値</th>
      <th>説明</th>
    </tr>
  </thead>
  <tbody>
    <tr><td><code>xs</code></td><td>0px</td><td>超小型（スマートフォン、縦向き）</td></tr>
    <tr><td><code>sm</code></td><td>600px</td><td>小型（スマートフォン横向き / タブレット）</td></tr>
    <tr><td><code>md</code></td><td>900px</td><td>中型（タブレット）</td></tr>
    <tr><td><code>lg</code></td><td>1200px</td><td>大型（デスクトップ）</td></tr>
    <tr><td><code>xl</code></td><td>1536px</td><td>超大型（大型デスクトップ）</td></tr>
  </tbody>
</table>

```
xs       sm       md       lg       xl
│        │        │        │        │
├────────┼────────┼────────┼────────┼────────►
0       600      900     1200     1536    ∞
```

---

## ブレークポイントヘルパー

### up() - 最小幅

```tsx
theme.breakpoints.up('md')
// @media (min-width: 900px)
```

```tsx
// md（900px）以上でスタイルが適用される
<Box
  sx={{
    bgcolor: 'grey.100',
    [theme.breakpoints.up('md')]: {
      bgcolor: 'primary.main',
    },
  }}
/>
```

### down() - 最大幅

```tsx
theme.breakpoints.down('md')
// @media (max-width: 899.95px)
```

```tsx
// md未満（< 900px）でスタイルが適用される
<Box
  sx={{
    display: 'block',
    [theme.breakpoints.down('md')]: {
      display: 'none',
    },
  }}
/>
```

### between() - 範囲

```tsx
theme.breakpoints.between('sm', 'lg')
// @media (min-width: 600px) and (max-width: 1199.95px)
```

### only() - 特定のブレークポイント

```tsx
theme.breakpoints.only('md')
// @media (min-width: 900px) and (max-width: 1199.95px)
```

---

## sxでのレスポンシブ値

### オブジェクト構文

```tsx
<Box
  sx={{
    width: {
      xs: '100%',   // 0px+
      sm: '50%',    // 600px+
      md: '33.33%', // 900px+
      lg: '25%',    // 1200px+
    },
  }}
/>
```

### 配列構文

```tsx
// [xs, sm, md, lg, xl]
<Box sx={{ width: ['100%', '50%', '33.33%', '25%'] }} />

// nullでブレークポイントをスキップ
<Box sx={{ width: ['100%', null, '50%'] }} />
// xsで100%、smは変更なし、md以上で50%
```

---

## Gridのレスポンシブ

```tsx
import { Grid } from '@mui/material'

<Grid container spacing={2}>
  <Grid
    item
    xs={12}    // モバイルで全幅
    sm={6}     // タブレットで半分の幅
    md={4}     // デスクトップで3分の1の幅
    lg={3}     // 大型で4分の1の幅
  >
    <Item />
  </Grid>
</Grid>
```

---

## Hiddenコンポーネント

```tsx
import { Hidden } from '@mui/material' // 非推奨

// 代わりにsxを使用
<Box sx={{ display: { xs: 'none', md: 'block' } }}>
  モバイルでは非表示
</Box>

<Box sx={{ display: { xs: 'block', md: 'none' } }}>
  デスクトップでは非表示
</Box>
```

---

## useMediaQueryフック

```tsx
import { useMediaQuery, useTheme } from '@mui/material'

function Component() {
  const theme = useTheme()

  // md以上の画面かどうかチェック
  const isDesktop = useMediaQuery(theme.breakpoints.up('md'))

  // 特定の範囲をチェック
  const isTablet = useMediaQuery(theme.breakpoints.between('sm', 'md'))

  // システム設定
  const prefersDark = useMediaQuery('(prefers-color-scheme: dark)')

  return isDesktop ? <DesktopView /> : <MobileView />
}
```

### SSRサポート

```tsx
const isDesktop = useMediaQuery(theme.breakpoints.up('md'), {
  defaultMatches: true, // SSR用のデフォルト
  noSsr: false,        // SSRサポートを有効化
})
```

---

## カスタムブレークポイント

### 追加または変更

```tsx
const theme = createTheme({
  breakpoints: {
    values: {
      xs: 0,
      sm: 600,
      md: 900,
      lg: 1200,
      xl: 1536,
      // カスタム追加
      xxl: 1920,
    },
  },
})

// TypeScript: 型を拡張
declare module '@mui/material/styles' {
  interface BreakpointOverrides {
    xxl: true
  }
}
```

### 異なる値

```tsx
const theme = createTheme({
  breakpoints: {
    values: {
      xs: 0,
      sm: 480,  // カスタム: 600pxではなく480px
      md: 768,  // カスタム: 900pxではなく768px
      lg: 1024, // カスタム: 1200pxではなく1024px
      xl: 1440, // カスタム: 1536pxではなく1440px
    },
  },
})
```

---

## Containerの幅

Containerコンポーネントのデフォルト最大幅:

<table>
  <thead>
    <tr>
      <th>ブレークポイント</th>
      <th>最大幅</th>
    </tr>
  </thead>
  <tbody>
    <tr><td>xs</td><td>444px</td></tr>
    <tr><td>sm</td><td>600px</td></tr>
    <tr><td>md</td><td>900px</td></tr>
    <tr><td>lg</td><td>1200px</td></tr>
    <tr><td>xl</td><td>1536px</td></tr>
  </tbody>
</table>

```tsx
<Container maxWidth="lg">
  {/* 最大1200pxの幅 */}
</Container>

<Container maxWidth={false}>
  {/* 全幅 */}
</Container>
```

---

## 一般的なレスポンシブパターン

### モバイルファーストナビゲーション

```tsx
<Box sx={{ display: { xs: 'block', md: 'none' } }}>
  <MobileNav />
</Box>
<Box sx={{ display: { xs: 'none', md: 'flex' } }}>
  <DesktopNav />
</Box>
```

### レスポンシブタイポグラフィ

```tsx
<Typography
  sx={{
    fontSize: {
      xs: '1.5rem',
      sm: '2rem',
      md: '2.5rem',
      lg: '3rem',
    },
  }}
>
  レスポンシブ見出し
</Typography>
```

### レスポンシブスペーシング

```tsx
<Box
  sx={{
    p: { xs: 2, sm: 3, md: 4 },
    my: { xs: 3, md: 6 },
  }}
/>
```

### レスポンシブGrid

```tsx
<Grid container spacing={{ xs: 2, md: 3 }}>
  <Grid item xs={12} md={6} lg={4}>
    <Card />
  </Grid>
</Grid>
```

---

## ベストプラクティス

<table>
  <thead>
    <tr>
      <th>実践項目</th>
      <th>説明</th>
    </tr>
  </thead>
  <tbody>
    <tr><td><strong>モバイルファースト</strong></td><td><code>xs</code>から始めて、大きいブレークポイントを追加</td></tr>
    <tr><td><strong>テーマヘルパーを使用</strong></td><td>生のメディアクエリよりも<code>breakpoints.up()</code>を使用</td></tr>
    <tr><td><strong>オブジェクト構文</strong></td><td>配列よりも読みやすい</td></tr>
    <tr><td><strong>徹底的にテスト</strong></td><td>すべてのブレークポイントを確認</td></tr>
    <tr><td><strong>タッチを考慮</strong></td><td>モバイルは小さい画面だけではない</td></tr>
  </tbody>
</table>
