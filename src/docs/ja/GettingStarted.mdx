import { Meta, Source } from '@storybook/addon-docs/blocks'

<Meta title="デザインシステム/はじめ方" />

# MUI をはじめる

このガイドでは、React プロジェクトに MUI をセットアップし、最初のコンポーネントを作成する手順を説明します。

---

## インストール

### パッケージマネージャー

```bash
# npm
npm install @mui/material @emotion/react @emotion/styled

# yarn
yarn add @mui/material @emotion/react @emotion/styled

# pnpm
pnpm add @mui/material @emotion/react @emotion/styled
```

### styled-components を使用する場合（代替）

```bash
npm install @mui/material @mui/styled-engine-sc styled-components
```

### ピア依存関係

MUI は React 18 以上（または React 19）が必要です：

```bash
npm install react react-dom
```

---

## 基本セットアップ

### 1. Roboto フォントの追加

```html
<!-- index.html に追加 -->
<link rel="preconnect" href="https://fonts.googleapis.com" />
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
<link
  href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap"
  rel="stylesheet"
/>
```

npm 経由の場合：

```bash
npm install @fontsource/roboto
```

```tsx
// エントリーファイルで
import '@fontsource/roboto/300.css'
import '@fontsource/roboto/400.css'
import '@fontsource/roboto/500.css'
import '@fontsource/roboto/700.css'
```

### 2. Material Icons の追加（オプション）

```bash
npm install @mui/icons-material
```

CDN 経由の場合：

```html
<link
  rel="stylesheet"
  href="https://fonts.googleapis.com/icon?family=Material+Icons"
/>
```

### 3. CssBaseline

一貫したベースラインスタイルを適用：

```tsx
import { CssBaseline } from '@mui/material'

function App() {
  return (
    <>
      <CssBaseline />
      {/* Your app */}
    </>
  )
}
```

---

## 最初のコンポーネント

```tsx
import { Button, Stack } from '@mui/material'

function MyFirstComponent() {
  return (
    <Stack spacing={2} direction="row">
      <Button variant="text">Text</Button>
      <Button variant="contained">Contained</Button>
      <Button variant="outlined">Outlined</Button>
    </Stack>
  )
}
```

---

## テーマのセットアップ

### 基本的なテーマプロバイダー

```tsx
import { ThemeProvider, createTheme } from '@mui/material/styles'
import { CssBaseline } from '@mui/material'

const theme = createTheme({
  palette: {
    primary: {
      main: '#1976d2',
    },
    secondary: {
      main: '#9c27b0',
    },
  },
})

function App() {
  return (
    <ThemeProvider theme={theme}>
      <CssBaseline />
      {/* Your app */}
    </ThemeProvider>
  )
}
```

### ダークモード対応

```tsx
import { ThemeProvider, createTheme } from '@mui/material/styles'
import { CssBaseline, useMediaQuery } from '@mui/material'
import { useMemo } from 'react'

function App() {
  const prefersDarkMode = useMediaQuery('(prefers-color-scheme: dark)')

  const theme = useMemo(
    () =>
      createTheme({
        palette: {
          mode: prefersDarkMode ? 'dark' : 'light',
        },
      }),
    [prefersDarkMode]
  )

  return (
    <ThemeProvider theme={theme}>
      <CssBaseline />
      {/* Your app */}
    </ThemeProvider>
  )
}
```

---

## TypeScript サポート

MUI は TypeScript で構築されています。すべてのコンポーネントには完全な型定義があります。

### テーマの型を拡張する

```tsx
// theme.d.ts
import '@mui/material/styles'

declare module '@mui/material/styles' {
  interface Palette {
    tertiary: Palette['primary']
  }
  interface PaletteOptions {
    tertiary?: PaletteOptions['primary']
  }
}
```

### コンポーネントの Props

```tsx
import type { ButtonProps } from '@mui/material/Button'

interface MyButtonProps extends ButtonProps {
  loading?: boolean
}

function MyButton({ loading, children, ...props }: MyButtonProps) {
  return (
    <Button disabled={loading} {...props}>
      {loading ? 'Loading...' : children}
    </Button>
  )
}
```

---

## プロジェクト構成の推奨

```
src/
├── components/          # 再利用可能なコンポーネント
│   └── Button/
│       ├── Button.tsx
│       └── index.ts
├── theme/               # テーマ設定
│   ├── index.ts
│   ├── palette.ts
│   ├── typography.ts
│   └── components.ts
├── hooks/               # カスタムフック
│   └── useThemeMode.ts
└── App.tsx
```

---

## 次のステップ

- **[テーマ設定](/docs/design-system-theming--docs)** - テーマをカスタマイズする
- **[デザイントークン](/docs/design-system-design-tokens--docs)** - トークンシステムを理解する
- **[コンポーネント](/docs/components-inputs-button--docs)** - すべてのコンポーネントを探索する
